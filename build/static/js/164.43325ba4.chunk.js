"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[164],{640:function(e,t,r){r(2791);var a=r(184);t.Z=function(e){var t=e.title;return(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-xl",children:t})})}},1164:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var a=r(4165),s=r(5861),l=r(9439),n=r(2791),i=r(9434),u=r(3695),o=r(478),c=r(1095),d=r(6106),m=r(914),x=r(1044),p=r(5014),b=r(184);var h=function(e){var t=e.showBusForm,r=e.setShowBusForm,h=e.type,g=void 0===h?"add":h,f=e.getData,j=e.selectedBus,v=e.setSelectedBus,Z=(0,i.I0)(),w=(0,n.useState)([]),y=(0,l.Z)(w,2),N=y[0],k=y[1],I=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Z((0,p.YC)()),s=null,"add"!==g){e.next=9;break}return e.next=6,x.Z.post("/api/buses/add-bus",t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,x.Z.put("/api/buses/".concat(j._id),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 11:s=e.sent;case 12:s.data.success?u.ZP.success(s.data.message):u.ZP.error(s.data.message),f(),r(!1),v(null),Z((0,p.Ir)()),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),u.ZP.error(e.t0.message),Z((0,p.Ir)());case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){x.Z.get("/api/cities/get-all-cities",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){k(e.data.data)}))}),[]),(0,b.jsx)(o.Z,{width:800,title:"add"===g?"Add Bus":"Update Bus",visible:t,onCancel:function(){v(null),r(!1)},footer:!1,children:(0,b.jsxs)(c.Z,{layout:"vertical",onFinish:I,initialValues:j,children:[(0,b.jsxs)(d.Z,{gutter:[10,10],children:[(0,b.jsx)(m.Z,{lg:24,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Bus Name",name:"name",rules:[{required:!0,message:"Please enter bus name"}],children:(0,b.jsx)("input",{type:"text",className:"block border border-blue-500 w-full p-3 rounded-lg mb-4"})})}),(0,b.jsx)(m.Z,{lg:12,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Bus Number",name:"busNumber",rules:[{required:!0,message:"Please input bus number!"}],children:(0,b.jsx)("input",{type:"text",className:"block border border-blue-500 w-full p-3 rounded-lg mb-4"})})}),(0,b.jsx)(m.Z,{lg:12,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Capacity",name:"capacity",rules:[{required:!0,message:"Please input bus capacity!"}],children:(0,b.jsx)("input",{type:"number",className:"block border border-blue-500 w-full p-3 rounded-lg mb-4"})})}),(0,b.jsx)(m.Z,{lg:12,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"From",name:"from",rules:[{required:!0,message:"Please Choose an option",validateTrigger:"onSubmit"}],children:(0,b.jsxs)("select",{className:"block border border-blue-500 w-full p-3 rounded-lg mb-4",children:[(0,b.jsx)("option",{value:"",children:"From"}),N.map((function(e,t){return(0,b.jsx)("option",{value:e.ville,children:e.ville},t)}))]})})}),(0,b.jsx)(m.Z,{lg:12,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"To",name:"to",rules:[{required:!0,message:"Please Choose an option",validateTrigger:"onSubmit"}],children:(0,b.jsxs)("select",{className:"block border border-blue-500 w-full p-3 rounded-lg mb-4",children:[(0,b.jsx)("option",{value:"",children:"To"}),N.map((function(e,t){return(0,b.jsx)("option",{value:e.ville,children:e.ville},t)}))]})})}),(0,b.jsx)(m.Z,{lg:8,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Journey Date",name:"journeyDate",rules:[{required:!0,message:"Please input journey date!",validateTrigger:"onSubmit"}],children:(0,b.jsx)("input",{min:(new Date).toISOString().split("T")[0],type:"date",className:"block border border-blue-500 w-full p-3 rounded-lg mb-4"})})}),(0,b.jsx)(m.Z,{lg:8,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Departure",name:"departure",rules:[{required:!0,message:"Please input departure time!",validateTrigger:"onSubmit"}],children:(0,b.jsx)("input",{type:"time",className:"block border border-blue-500 w-full p-3 rounded-lg mb-4"})})}),(0,b.jsx)(m.Z,{lg:8,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Arrival",name:"arrival",rules:[{required:!0,message:"Please input arrival time!",validateTrigger:"onSubmit"}],children:(0,b.jsx)("input",{type:"time",className:"block border border-blue-500 w-full p-3 rounded-lg mb-4"})})}),(0,b.jsx)(m.Z,{lg:12,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please input price!"}],children:(0,b.jsx)("input",{type:"number",className:"block border border-blue-500 w-full p-3 rounded-lg mb-4"})})}),(0,b.jsx)(m.Z,{lg:12,xs:24,children:(0,b.jsx)(c.Z.Item,{label:"Status",name:"status",rules:[{required:!0,validateTrigger:"onSubmit"}],children:(0,b.jsxs)("select",{className:"block border border-blue-500 w-full p-3 rounded-lg mb-4",name:"status",id:"status",selected:"Yet to start",children:[(0,b.jsx)("option",{value:"Yet to start",selected:!0,children:"Yet To Start"}),(0,b.jsx)("option",{value:"Running",children:"Running"}),(0,b.jsx)("option",{value:"Completed",children:"Completed"})]})})})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("button",{type:"submit",className:"relative inline-flex items-center justify-start px-10 py-3 overflow-hidden font-bold rounded-full group",children:[(0,b.jsx)("span",{className:"w-32 h-32 rotate-45 translate-x-12 -translate-y-2 absolute left-0 top-0 bg-white opacity-[3%]"}),(0,b.jsx)("span",{className:"absolute top-0 left-0 w-48 h-48 -mt-1 transition-all duration-500 ease-in-out rotate-45 -translate-x-56 -translate-y-24 bg-blue-600 opacity-100 group-hover:-translate-x-8"}),(0,b.jsx)("span",{className:"relative w-full text-left text-black transition-colors duration-200 ease-in-out group-hover:text-white",children:"Save"}),(0,b.jsx)("span",{className:"absolute inset-0 border-2 border-blue-600 rounded-full"})]})})]})})},g=r(640),f=r(6079),j=r(4270);var v=function(){var e=(0,i.I0)(),t=(0,n.useState)(!1),r=(0,l.Z)(t,2),o=r[0],c=r[1],d=(0,n.useState)([]),m=(0,l.Z)(d,2),v=m[0],Z=m[1],w=(0,n.useState)(null),y=(0,l.Z)(w,2),N=y[0],k=y[1],I=(0,n.useCallback)((0,s.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e((0,p.YC)()),t.next=4,x.Z.post("/api/buses/get-all-buses",{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:r=t.sent,e((0,p.Ir)()),r.data.success?Z(r.data.data):u.ZP.error(r.data.message),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),e((0,p.Ir)()),u.ZP.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))),[e]),S=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e((0,p.YC)()),t.next=4,x.Z.delete("/api/buses/".concat(r),{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:s=t.sent,e((0,p.Ir)()),s.data.success?(u.ZP.success(s.data.message),I()):u.ZP.error(s.data.message),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),e((0,p.Ir)()),u.ZP.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),B=[{title:"Name",dataIndex:"name"},{title:"Bus Number",dataIndex:"busNumber"},{title:"From",dataIndex:"from"},{title:"To",dataIndex:"to"},{title:"Journey Date",dataIndex:"journeyDate"},{title:"Status",dataIndex:"status",render:function(e){return"Completed"===e?(0,b.jsx)("span",{className:"text-red-500",children:e}):"running"===e?(0,b.jsx)("span",{className:"text-yellow-500",children:e}):(0,b.jsx)("span",{className:"text-green-500",children:e})}},{title:"Action",dataIndex:"action",render:function(e,t){return(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("i",{className:"ri-delete-bin-line cursor-pointer text-red-500 text-xl",onClick:function(){return S(t._id)}}),(0,b.jsx)("i",{className:"ri-pencil-line cursor-pointer text-xl",onClick:function(){k(t),c(!0)}})]})}}];return(0,n.useEffect)((function(){I()}),[I]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.q,{children:(0,b.jsx)("title",{children:"Buses"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between p-7",children:[(0,b.jsx)(g.Z,{title:"Buses"}),(0,b.jsxs)("button",{type:"submit",className:"relative inline-flex items-center justify-start px-10 py-3 overflow-hidden font-bold rounded-full group",onClick:function(){return c(!0)},children:[(0,b.jsx)("span",{className:"w-32 h-32 rotate-45 translate-x-12 -translate-y-2 absolute left-0 top-0 bg-white opacity-[3%]"}),(0,b.jsx)("span",{className:"absolute top-0 left-0 w-48 h-48 -mt-1 transition-all duration-500 ease-in-out rotate-45 -translate-x-56 -translate-y-24 bg-blue-600 opacity-100 group-hover:-translate-x-8"}),(0,b.jsx)("span",{className:"relative w-full text-left text-black transition-colors duration-200 ease-in-out group-hover:text-white",children:"Add Bus"}),(0,b.jsx)("span",{className:"absolute inset-0 border-2 border-blue-600 rounded-full"})]})]}),(0,b.jsxs)("div",{className:"p-7",children:[(0,b.jsx)(f.Z,{columns:B,dataSource:v,pagination:{pageSize:7}}),o&&(0,b.jsx)(h,{showBusForm:o,setShowBusForm:c,type:N?"edit":"add",selectedBus:N,setSelectedBus:k,getData:I})]})]})]})}}}]);
//# sourceMappingURL=164.43325ba4.chunk.js.map
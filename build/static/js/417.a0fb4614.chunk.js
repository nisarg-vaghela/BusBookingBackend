"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[417],{640:function(e,t,a){a(2791);var r=a(184);t.Z=function(e){var t=e.title;return(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-xl",children:t})})}},1781:function(e,t,a){a.d(t,{b:function(){return r}});var r=a(1044).Z.create({headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})},5417:function(e,t,a){a.r(t);var r=a(4165),n=a(1413),s=a(5861),c=a(9439),u=a(2791),i=a(9434),o=a(1781),d=a(3695),l=a(6079),m=a(5014),x=a(640),f=a(2426),p=a.n(f),h=a(4270),b=a(184);t.default=function(){var e=(0,u.useState)([]),t=(0,c.Z)(e,2),a=t[0],f=t[1],g=(0,i.I0)(),k=(0,u.useCallback)((0,s.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g((0,m.YC)()),e.next=4,o.b.get("/api/bookings/".concat(localStorage.getItem("user_id")),{});case 4:t=e.sent,g((0,m.Ir)()),t.data.success?(a=t.data.data.map((function(e){return(0,n.Z)((0,n.Z)((0,n.Z)({},e),e.bus),{},{key:e._id,user:e.user.name})})),f(a)):d.ZP.error(t.data.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),g((0,m.Ir)()),d.ZP.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[g]),Z=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,a,n,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g((0,m.YC)()),e.next=4,o.b.get("/api/bookings/".concat(localStorage.getItem("user_id")));case 4:return t=e.sent,a=t.data.data[0].bus._id,n=t.data.data[0].user._id,s=t.data.data[0]._id,e.next=10,o.b.delete("/api/bookings/".concat(s,"/").concat(n,"/").concat(a),{});case 10:c=e.sent,g((0,m.Ir)()),c.data.success?(d.ZP.success(c.data.message),k()):d.ZP.error(c.data.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),g((0,m.Ir)()),d.ZP.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),v=[{title:"Bus Name",dataIndex:"name",key:"bus"},{title:"Full Name",dataIndex:"user",key:"user"},{title:"Bus Number",dataIndex:"busNumber",key:"bus"},{title:"Journey Date",dataIndex:"journeyDate",render:function(e){return p()(e).format("DD/MM/YYYY")}},{title:"Journey Time",dataIndex:"departure",render:function(e){return p()(e,"HH:mm").format("hh:mm A")}},{title:"Seats",dataIndex:"seats",render:function(e){return e.join(", ")}},{title:"Action",dataIndex:"action",render:function(e,t){return(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("button",{className:"underline text-base text-red-500 cursor-pointer hover:text-red-700",onClick:function(){Z()},children:"Cancel"})})}}];return(0,u.useEffect)((function(){k()}),[k]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.q,{children:(0,b.jsx)("title",{children:"Bookings"})}),(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsx)(x.Z,{title:"Bookings"}),(0,b.jsx)(l.Z,{columns:v,dataSource:a})]})]})}}}]);
//# sourceMappingURL=417.a0fb4614.chunk.js.map
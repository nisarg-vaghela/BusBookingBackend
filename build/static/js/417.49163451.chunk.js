"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[417],{640:function(e,t,a){a(2791);var r=a(184);t.Z=function(e){var t=e.title;return(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-xl",children:t})})}},5417:function(e,t,a){a.r(t);var r=a(4165),n=a(1413),s=a(5861),c=a(9439),o=a(2791),u=a(9434),i=a(1044),d=a(3695),l=a(6079),m=a(5014),x=a(640),f=a(2426),h=a.n(f),g=a(4270),p=a(184);t.default=function(){var e=(0,o.useState)([]),t=(0,c.Z)(e,2),a=t[0],f=t[1],k=(0,u.I0)(),Z=(0,o.useCallback)((0,s.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k((0,m.YC)()),e.next=4,i.Z.get("/api/bookings/".concat(localStorage.getItem("user_id")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,k((0,m.Ir)()),t.data.success?(a=t.data.data.map((function(e){return(0,n.Z)((0,n.Z)((0,n.Z)({},e),e.bus),{},{key:e._id,user:e.user.name})})),f(a)):d.ZP.error(t.data.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),k((0,m.Ir)()),d.ZP.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[k]),b=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,a,n,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k((0,m.YC)()),e.next=4,i.Z.get("/api/bookings/".concat(localStorage.getItem("user_id")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:return t=e.sent,a=t.data.data[0].bus._id,n=t.data.data[0].user._id,s=t.data.data[0]._id,e.next=10,i.Z.delete("/api/bookings/".concat(s,"/").concat(n,"/").concat(a),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 10:c=e.sent,k((0,m.Ir)()),c.data.success?(d.ZP.success(c.data.message),Z()):d.ZP.error(c.data.message),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),k((0,m.Ir)()),d.ZP.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),v=[{title:"Bus Name",dataIndex:"name",key:"bus"},{title:"Full Name",dataIndex:"user",key:"user"},{title:"Bus Number",dataIndex:"busNumber",key:"bus"},{title:"Journey Date",dataIndex:"journeyDate",render:function(e){return h()(e).format("DD/MM/YYYY")}},{title:"Journey Time",dataIndex:"departure",render:function(e){return h()(e,"HH:mm").format("hh:mm A")}},{title:"Seats",dataIndex:"seats",render:function(e){return e.join(", ")}},{title:"Action",dataIndex:"action",render:function(e,t){return(0,p.jsx)("div",{className:"flex gap-2",children:(0,p.jsx)("button",{className:"underline text-base text-red-500 cursor-pointer hover:text-red-700",onClick:function(){b()},children:"Cancel"})})}}];return(0,o.useEffect)((function(){Z()}),[Z]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g.q,{children:(0,p.jsx)("title",{children:"Bookings"})}),(0,p.jsxs)("div",{className:"p-5",children:[(0,p.jsx)(x.Z,{title:"Bookings"}),(0,p.jsx)(l.Z,{columns:v,dataSource:a})]})]})}}}]);
//# sourceMappingURL=417.49163451.chunk.js.map